{% extends 'base.html.twig' %}

{% block title %}Author Details{% endblock %}

{% block body %}
    {% if err %}
        <h1>{{ err }}</h1>
    {% else %}
        <h1>Author Details</h1>

        <h3>First Name: {{ user['first_name'] }}</h3>
        <h3>Last Name: {{ user['last_name'] }}</h3>
        <h3>Gender: {{ user['gender'] }}</h3>
        <h3>Birthday: {{ user['birthday'] }}</h3>
        <h3>Place of Birth: {{ user['place_of_birth'] }}</h3>

        {# Actual table of books #}
        <h2>Books:</h2>
        <table border="1" cellpadding="5" cellspacing="0">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Description</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for book in user.books %}
                    <tr>
                        <td>{{ book.id }}</td>
                        <td>{{ book.title }}</td>
                        <td>{{ book.description }}</td>
                        <td>
                            <form method="post" action="{{ path('book_delete', {id: book.id}) }}" onsubmit="return confirm('Are you sure you want to delete this book?');">
                                <button type="submit">Delete</button>
                            </form>
                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="4">No books found.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endif %}
{% endblock %}
